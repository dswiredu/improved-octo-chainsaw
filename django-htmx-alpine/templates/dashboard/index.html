{% extends "base.html" %}
{% load humanize %}

{% block title %}Stock Price Analytics{% endblock %}

{% block content %}
    <div class="p-2 bg-gray-100 h-screen">
        <div class="flex justify-between items-center">
            <h1 class="text-2xl font-semibold text-gray-500">Overview</h1>
            {% include "partials/_datepicker.html" %}
        </div>

        <!-- Animated loading wrapper -->
        <div 
            x-data="{ loading: true }" 
            x-init="setTimeout(() => loading = false, 100)"
        >
            <!-- Minimal bar loading indicator -->
            <template x-if="loading">
                <div class="flex justify-center items-center h-36 w-full col-span-5">
                    <div class="flex space-x-2">
                        <div class="w-2 h-6 bg-gray-400 animate-bounce rounded"></div>
                        <div class="w-2 h-6 bg-gray-400 animate-bounce delay-150 rounded"></div>
                        <div class="w-2 h-6 bg-gray-400 animate-bounce delay-300 rounded"></div>
                    </div>
                </div>
            </template>

            <!-- Real Summary Cards -->
            <template x-if="!loading">
                <div 
                    class="grid grid-cols-1 md:grid-cols-5 gap-4 mb-6 transition-opacity duration-500 ease-in-out"
                    x-transition.opacity
                >
                    {% include "dashboard/partials/summary_cards.html" %}
                </div>
            </template>
        </div>

        <div id="index-contents-container" class="flex justify-between items-center mb-4">
            <p class="text-lg font-medium text-gray-800">
                Selected date: {{initial_date}}
            </p>

            <ul class="text-gray-700 text-base space-y-1">
                <li><strong>Date:</strong> {{ price_data.date }}</li>
                <li><strong>Open:</strong> {{ price_data.open_price }}</li>
                <li><strong>Close:</strong> {{ price_data.close_price }}</li>
                <li><strong>High:</strong> {{ price_data.high_price }}</li>
                <li><strong>Low:</strong> {{ price_data.low_price }}</li>
                <li><strong>Volume:</strong> {{ price_data.volume|intcomma }}</li>
            </ul>
        </div>
    </div>
{% endblock %}
